<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Title</title>
    <!-- Bootstrap -->
      <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<div class="col-xs-12">
    <!--Top Bar> <!-->
    <div class="row header">
        <div class="col-xs-3 header"></div>
          <div class="col-xs-6 header">
            <center><a href="/">
            <svg class="Wolf" id="Wolf" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 225.83 228.32"><defs>
            <style>.cls-1{fill:none;stroke-width:8px;}.cls-1,.cls-2{stroke:#fff;stroke-miterlimit:10;}.cls-2{fill:#fff;stroke-width:3px;}</style>
            </defs><title>Wolf</title>
            <polygon class="cls-1" points="220.91 125.33 130.91 224.32 94.92 224.32 4.92 125.33 40.91 62.33 49.91 8.32 85.92 44.33 130.91 44.33 175.91 8.32 184.91 62.33 220.91 125.33"/>
            <polyline class="cls-1" points="220.91 125.33 139.91 89.33 130.91 188.32 121.92 197.32 103.92 197.32 94.92 188.32 85.92 89.33 4.92 125.33"/>
            <polygon class="cls-2" points="49.91 125.33 49.91 107.33 85.92 125.33 49.91 125.33"/>
            <polygon class="cls-2" points="175.91 125.33 175.91 107.33 139.91 125.33 175.91 125.33"/>
            </svg></a></center>
          </div>
          <div class="col-xs-3 header">
        </div>
    </div>
    <!--Form> <!-->
    <div class="row">
        <div class="col-xs-2 col-md-4 col-lg-5"></div>
        <center><div class="col-xs-8 col-md-4 col-lg-2 formblock">
            <form id= "login" action="" method=post>
            <dl>
                <dt>Username:
                <dd>
                <input class="loginInput" type=text name=username>
                <dt>Password:
                <dd>
                <input class="loginInput" type=password name=password>
            </dl>
            <p>
            <input class="loginButtonSmall" type=submit value=Login>
            <input type=hidden value="{{ next or '' }}" name=next>
        </form>
        </div></center>
        <div class="col-xs-2 col-md-4 col-lg-5"></div>
    </div>

</div>
<script type="text/javascript">
    var frm = $('#login');
    frm.submit(function (ev) {
        $.ajax({
            type: frm.attr('method'),
            url: frm.attr('action'),
            data: frm.serialize(),
            success: function (data) {
                console.log(data)
                if(data.token){
                    sessionStorage['token'] = data.token;
                    sessionStorage['uid'] = data.uid;
                    window.location.href = '/';
                }
                else{
                    alert("Wrong login")
                }
            }
        });
        ev.preventDefault();
    });
</script>
</body>
</html>