<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>btc</title>

    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway|Roboto" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
       
    <!-- Pricechart javascript sources -->
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/themes/dark.js"></script>
        
        <!-- amCharts javascript code -->
        <script type="text/javascript">
            <title>chart created with amCharts | amCharts</title>
            <meta name="description" content="chart created using amCharts live editor" />
        </script>
        
        <!-- amCharts javascript sources -->
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/themes/dark.js"></script>
        

        <!-- amCharts javascript code -->
        <script type="text/javascript">
          AmCharts.makeChart("chart2div",
            {
              "type": "serial",
              "categoryField": "date",
              "dataDateFormat": "YYYY-MM-DD HH",
              "color": "#FFFFFF",
              "theme": "dark",
              "categoryAxis": {
                "minPeriod": "hh",
                "parseDates": true,
                "gridThickness": 0

              },
              "chartCursor": {
                "enabled": true,
                "categoryBalloonDateFormat": "JJ:NN"
              },
              "trendLines": [],
              "graphs": [

                {
                  "fillAlphas": 0.0,
                  "fillColors": "#FFFFFF",
                  "gapPeriod": 0,
                  "id": "AmGraph-4",
                  "lineColor": "#C8F7C5",
                  "lineAlpha": 1,
                  "lineThickness": 5,
                  "title": "Price",
                  "valueField": "Price"
                }
              ],
              "guides": [],
              "valueAxes": [
                {
                  "id": "ValueAxis-1",
                  "stackType": "regular",
                  "tickLength": 0,
                  "title": "",
                  "gridThickness": 0,
                }
              ],
              "allLabels": [],
              "balloon": {},
              "legend": {
                "enabled": true
              },
              "titles": [
                {
                  "id": "Title-1",
                  "size": 15,
                  "text": ""
                }
              ],
              "dataProvider": [
                {
                  "date": "2014-03-01 08",
                  "Price": "404"
                },
                {
                  "date": "2014-03-01 09",
                  "Price": "777"
                },
                {
                  "date": "2014-03-01 10",
                  "Price": "495"
                },
                {
                  "date": "2014-03-01 11",
                  "Price": "500"
                },
                {
                  "date": "2014-03-01 12",
                  "Price": "500"
                },
                {
                  "date": "2014-03-01 13",
                  "Price": "605"
                },
                {
                  "date": "2014-03-01 14",
                  "Price": "611"
                }
              ]
            }
          );
        </script> 
   
    <!-- Scorechart javascript sources -->
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
        <script type="text/javascript" src="https://www.amcharts.com/lib/3/themes/dark.js"></script>
        <!-- amCharts javascript code -->
        <script type="text/javascript">
          AmCharts.makeChart("chart1div",
            {
              "type": "serial",
              "categoryField": "date",
              "dataDateFormat": "YYYY-MM-DD HH",
              "color": "#FFFFFF",
              "theme": "dark",
              "categoryAxis": {               
                "minPeriod": "hh",
                "parseDates": true,
                "gridThickness": 0

              },
              "chartCursor": {
                "enabled": true,
                "categoryBalloonDateFormat": "JJ:NN"
              },
              "trendLines": [],
              "graphs": [
                {
                  "fillAlphas": 1,
                  "fillColors": "#90C695",
                  "id": "AmGraph-1",
                  "lineAlpha": 0,
                  "tabIndex": 0,
                  "title": "Reddit",
                  "valueField": "Reddit"
                },
                {
                  "fillAlphas": 1,
                  "fillColors": "#87D37C",
                  "id": "AmGraph-2",
                  "lineAlpha": 0,
                  "title": "Twitter",
                  "valueField": "Twitter"
                },
                {
                  "fillAlphas": 1,
                  "fillColors": "#C8F7C5",
                  "id": "AmGraph-3",
                  "lineThickness": 0,
                  "lineColor": "#C8F7C5",
                  "title": "News",
                  "valueField": "News"
                }
              ],
              "guides": [],
              "valueAxes": [
                {
                  "id": "ValueAxis-1",
                  "gridThickness": 0,
                  "stackType": "regular",
                  "tickLength": 0,
                  "title": ""
                }
              ],
              "allLabels": [],
              "balloon": {},
              "legend": {
                "enabled": true
              },
              "titles": [
                {
                  "id": "Title-1",
                  "size": 15,
                  "text": ""
                }
              ],
              "dataProvider": [
                {
                  "date": "2014-03-01 08",
                  "News": 8,
                  "Twitter": 5,
                  "Reddit": 8
                },
                {
                  "date": "2014-03-01 09",
                  "News": 7,
                  "Twitter": 7,
                  "Reddit": 6
                },
                {
                  "date": "2014-03-01 10",
                  "News": 6,
                  "Twitter": 3,
                  "Reddit": 2
                },
                {
                  "date": "2014-03-01 11",
                  "News": 7,
                  "Twitter": 3,
                  "Reddit": 1
                },
                {
                  "date": "2014-03-01 12",
                  "News": 7,
                  "Twitter": 1,
                  "Reddit": 2
                },
                {
                  "date": "2014-03-01 13",
                  "News": 7,
                  "Twitter": 2,
                  "Reddit": 3
                },
                {
                  "date": "2014-03-01 14",
                  "News": 7,
                  "Twitter": 8,
                  "Reddit": 6
                }
              ]
            }
          );
        </script>
  </head>
<body onload="twitter();">  <div class="col-xs-12">
    <!--Top Bar> <!-->
      <div class="row header">
        <div class="col-xs-3 header"></div>
          <div class="col-xs-6 header">
            <center><a href="/">
            <svg class="Wolf" id="Wolf" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 225.83 228.32"><defs>
            <style>.cls-1{fill:none;stroke-width:8px;}.cls-1,.cls-2{stroke:#fff;stroke-miterlimit:10;}.cls-2{fill:#fff;stroke-width:3px;}</style>
            </defs><title>Wolf</title>
            <polygon class="cls-1" points="220.91 125.33 130.91 224.32 94.92 224.32 4.92 125.33 40.91 62.33 49.91 8.32 85.92 44.33 130.91 44.33 175.91 8.32 184.91 62.33 220.91 125.33"/>
            <polyline class="cls-1" points="220.91 125.33 139.91 89.33 130.91 188.32 121.92 197.32 103.92 197.32 94.92 188.32 85.92 89.33 4.92 125.33"/>
            <polygon class="cls-2" points="49.91 125.33 49.91 107.33 85.92 125.33 49.91 125.33"/>
            <polygon class="cls-2" points="175.91 125.33 175.91 107.33 139.91 125.33 175.91 125.33"/>
            </svg></a></center>
          </div> 
          <div class="col-xs-3 header">
        </div>
      </div>

    <!--Datablock> <!-->
        
          <div class="row">
              <center><div class="col-xs-12"><h3 id="title">{{ title }}</h3>
                  <img class="icon" src="{{ url }}" alt="Bitcoin Logo">
              </div></center>
          </div>

          <div class="row">
            <div class="col-xs-1 col-md-4"></div>
            <div class="col-xs-10 col-md-4 datablock">
            <div class="col-xs-1 col-md-4"></div>
              <div class="row">
                    <center><div class="col-xs-12">
                      <div class="col-xs-4 textgrid bold">Data</div>
                      <div class="col-xs-4 textgrid bold">Amount</div>
                      <div class="col-xs-4 textgrid bold">% Change</div>
                    </div></center>
              </div>

              <div class="row">
                  <center><div class="col-xs-12">
                    <div class="col-xs-4 textgrid boldWhite">Price</div>
                    <div class="col-xs-4 textgrid" id="price">${{ currency_value['price_usd'] }}</div>
                    <div class="col-xs-4 textgrid">+5%</div>
                  </div></center>
              </div>

              <div class="row">
                  <center><div class="col-xs-12">
                    <div class="col-xs-4 textgrid boldWhite">Cap</div>
                    <div class="col-xs-4 textgrid">${{ currency_value['market_cap_usd'] }}</div>
                    <div class="col-xs-4 textgrid">+20%</div>
                  </div></center>
              </div>

              <div class="row">
                  <center><div class="col-xs-12">
                    <div class="col-xs-4 textgrid boldWhite">Volume</div>
                    <div class="col-xs-4 textgrid">${{ currency_value['24h_volume_usd'] }}</div>
                    <div class="col-xs-4 textgrid">-15%</div>
                  </div></center>
              </div>
              
            </div>
            <div class="col-xs-1"></div>
          </div>
    <!--Tradeblock> <!-->
      <div class="row">
            <div class="col-xs-1 col-md-4"></div>
            <div class="col-xs-10 col-md-4 datablock">

              <div class="row">
                    <center><div class="col-xs-12">
                      <div class="col-xs-4 textgrid bold">Buy/Sell</div>
                      <div class="col-xs-4 textgrid bold">Amount</div>
                      <div class="col-xs-4 textgrid bold">Total Price</div>
                    </div></center>
              </div>
                <div class="row">
                    <center><div class="col-xs-12">
                      <div class="col-xs-4 textgrid" id = "buyName">{{ title }}</div>
                      <div class="col-xs-4 textgrid"><input class="tradeInput" id="amount" type="text" style="color: #C0C0C0;"></div>
                      <div class="col-xs-4 textgrid" id="totaalPrice">0</div>
                    </div></center>
              </div>
            </div>
            <div class="col-xs-1 col-md-4"></div>
          </div>
      <div class="row">
                <div class="col-xs-1 col-md-4"></div>
                <div class="col-xs-10 col-md-4">
                    <div class="row">
                        <div class="col-xs-12">
                        <center><div class="col-xs-4"><button class="tradeButton" type="button" id="buybtn" > Buy Now</button></div></center>
                        <div class="col-xs-4"></div>
                        <center><div class="col-xs-4"><button class="tradeButton" type="button" id="sellbtn" > Sell Now</button></div></center>
                        </div>
                    </div>
                </div>
              <div class="col-xs-1 col-md-4"></div>
          </div>

    <!--Price Graph> <!-->
      <div class="row">
          <center><div class="col-xs-12"><h3>Price fluctuation</h3>
        </div></center>
      </div>

      <div class="row">
        <div class="col-md-2 hidden-xs"></div>
        <div class="col-md-8 col-xs-12">
            <div id="chart2div" class="graph" style="width: 100%; height: 400px;" ></div>
        </div>
        <div class="col-md-2 hidden-xs"></div>
      </div>

    <!--Score Graph> <!-->
      <div class="row">
        <center><div class="col-xs-12"><h3>Score</h3>
          </div></center>
          <div class="col-md-2 hidden-xs"></div>
          <div class="col-xs-12 col-md-8">
                <div id="chart1div" style="width: 100%; height: 400px;" ></div>
          </div>
          <div class="col-md-2 hidden-xs"></div>
      </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
                <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/static/js/lastTickValues.js"></script>
  </div>

  <script>
      $(document).ready(function() {
          $('#amount').change(function () {
              var totalPrice = $(this).val() * $('#price').text(); // get the current value of the input field.
              document.getElementById("totaalPrice").innerHTML = totalPrice;
          });

          $("#buybtn").click(function(){
              var currency = $('#buyName').text();
              var amount =  $('#amount').val();
              var price = $('#price').text();

              var obj = new Object();
              obj.currency = currency;
              obj.amount  = amount;
              obj.price = price;

              var jsonString = JSON.stringify(obj);
              console.log(jsonString);
              $.ajax({
                  type: 'POST',
                  url: "/buyCurrency",
                  headers: {  "token": ""+sessionStorage['token'],
                      "uid":sessionStorage["uid"]
                  },
                  contentType: "application/json",
                  dataType: 'json',
                  data: jsonString,
                  success: function (data) {
                      console.log(data)
                  }
              });
            alert(amount * price);
          });

          $("#sellbtn").click(function(){
              var currency = $('#buyName').text();
              var amount =  $('#amount').val();
              var price = $('#price').text();

              var obj = new Object();
              obj.currency = currency;
              obj.amount  = amount;
              obj.price = price;

              var jsonString = JSON.stringify(obj);
              console.log(jsonString);
              $.ajax({
                  type: 'POST',
                  url: "/sellCurrency",
                  headers: {  "token": ""+sessionStorage['token'],
                      "uid":sessionStorage["uid"]
                  },
                  contentType: "application/json",
                  dataType: 'json',
                  data: jsonString,
                  success: function (data) {
                      console.log(data)
                  }
              });
            alert(amount * price);
          });
      });

  </script>
  </body>
</html>