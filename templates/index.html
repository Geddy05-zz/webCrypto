<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>App v1</title>

    <!-- Bootstrap -->
      <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Raleway|Roboto" rel="stylesheet">
  </head>
  <body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <div class="col-xs-12">
      <!--Top Bar> <!-->
        <div class="row header">
          <div class="col-xs-3 header"></div>
            <div class="col-xs-6 header">
            <center><a href="/">
            <svg class="Wolf" id="Wolf" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 225.83 228.32"><defs>
            <style>.cls-1{fill:none;stroke-width:8px;}.cls-1,.cls-2{stroke:#fff;stroke-miterlimit:10;}.cls-2{fill:#fff;stroke-width:3px;}</style>
            </defs><title>Wolf</title>
            <polygon class="cls-1" points="220.91 125.33 130.91 224.32 94.92 224.32 4.92 125.33 40.91 62.33 49.91 8.32 85.92 44.33 130.91 44.33 175.91 8.32 184.91 62.33 220.91 125.33"/>
            <polyline class="cls-1" points="220.91 125.33 139.91 89.33 130.91 188.32 121.92 197.32 103.92 197.32 94.92 188.32 85.92 89.33 4.92 125.33"/>
            <polygon class="cls-2" points="49.91 125.33 49.91 107.33 85.92 125.33 49.91 125.33"/>
            <polygon class="cls-2" points="175.91 125.33 175.91 107.33 139.91 125.33 175.91 125.33"/>
            </svg></a></center>
            </div>
            <div id="header" class="col-xs-3 header">

          </div>
       </div>

      <!--Buttons> <!-->
        <div class="row homerow tablehead">
          <div class="col-xs-1 col-md-4"></div>
            <center><div class="col-xs-10 col-md-4 boldWhite">
              <div class="col-xs-2">Name</div>
              <div class="col-xs-4">Price</div>
              <div class="col-xs-4">% Change</div>
              <div class="col-xs-2"></div>
            </div></center>
          <div class="col-xs-1 col-md-4"></div>
        </div>

        <div class="row homerow">
          <div class="col-xs-1 col-md-4"></div>
            <center><a href="/btc {{ key }}"><div class="col-xs-10 col-md-4 homebutton">
              <div class="col-xs-2 bold">BTC</div>
              <div class="col-xs-4">${{ currency_value["Bitcoin"]["current_value"] }}</div>
              <div class="col-xs-4">{{ currency_value["Bitcoin"]['change'] }}%</div>
              <div class="col-xs-2"></div>
            </div></a></center>
          <div class="col-xs-1 col-md-4"></div>
        </div>

        <div class="row homerow">
          <div class="col-xs-1 col-md-4"></div>
            <center><a href="/eth"><div class="col-xs-10 col-md-4 homebutton">
              <div class="col-xs-2 bold">ETH</div>
              <div class="col-xs-4">${{ currency_value["Ethereum"]["current_value"] }}</div>
              <div class="col-xs-4">{{ currency_value["Ethereum"]['change'] }}%</div>
              <div class="col-xs-2"></div>
            </div></a></center>
          <div class="col-xs-1 col-md-4"></div>
        </div>

        <div class="row homerow">
          <div class="col-xs-1 col-md-4"></div>
            <center><a href="/ltc"><div class="col-xs-10 col-md-4 homebutton">
              <div class="col-xs-2 bold">LTC</div>
              <div class="col-xs-4">${{ currency_value["Litecoin"]["current_value"] }}</div>
              <div class="col-xs-4">{{ currency_value["Litecoin"]['change'] }}%</div>
              <div class="col-xs-2"></div>
            </div></a></center>
          <div class="col-xs-1 col-md-4"></div>
        </div>

        <div class="row homerow">
          <div class="col-xs-1 col-md-4"></div>
            <center><a href="/xmr"><div class="col-xs-10 col-md-4 homebutton">
              <div class="col-xs-2 bold">XMR</div>
              <div class="col-xs-4">${{ currency_value["Monero"]["current_value"] }}</div>
              <div class="col-xs-4">{{ currency_value["Monero"]['change'] }}%</div>
              <div class="col-xs-2"></div>
            </div></a></center>
          <div class="col-xs-1 col-md-4"></div>
        </div>

        <div class="row homerow">
          <div class="col-xs-1 col-md-4"></div>
            <center><a href="/xrp"><div class="col-xs-10 col-md-4 homebutton">
              <div class="col-xs-2 bold">XRP</div>
              <div class="col-xs-4">${{ currency_value["Ripple"]["current_value"] }}</div>
              <div class="col-xs-4">{{ currency_value["Ripple"]['change'] }}%</div>
              <div class="col-xs-2"></div>
            </div></a></center>
          <div class="col-xs-1 col-md-4"></div>
        </div>

        <div class="row homerow">
            <div class="col-xs-1 col-md-4"></div>
            <div class="col-xs-10 col-md-4">
                <button id = "login" style="float: left; visibility: visible" class="loginButton" type="button" onclick="location.href='/login';">Log In</button>
                <button id = "logout" style='float: left; visibility: hidden' class="loginButton" type="button" onclick="logOut();">Log Out</button>
                <button style="float: right" class="loginButton" type="button" onclick="location.href='/profile';">Profile</button>
            </div>
            <div class="col-xs-1 col-md-4"></div>
        </div>

          <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
          <!-- Include all compiled plugins (below), or include individual files as needed -->
          <script src="js/bootstrap.min.js"></script>
    </div>
  </body>

<script>
    $(document).ready(function(){
        console.log(sessionStorage['token'])
    $.ajax({ url: "getUserInfo",
            headers: {"token": ""+sessionStorage['token'],
            "uid":sessionStorage["uid"]},
            context: document.body,
            contentType: "application/json",
            dataType: 'json',
            success: function(data){
            createHeader(data);
          }});
    });

    function createHeader(data) {
        var budget = data["budget"];
        console.log(data)
        if (undefined != budget) {
            var budget = "Budget: $ " + parseFloat(data["budget"]).toFixed(2);
            document.getElementById("header").innerHTML = budget;

            document.getElementById("login").style.visibility = "hidden";
            document.getElementById("logout").style.visibility = "visible"

        }
    }

    function logOut() {
        sessionStorage['token'] = null;
        sessionStorage["uid"] = null;
        document.getElementById("header").innerHTML = "";
        document.getElementById("login").style.visibility = "visible";
        document.getElementById("logout").style.visibility = "hidden"
    }
</script>
</html>